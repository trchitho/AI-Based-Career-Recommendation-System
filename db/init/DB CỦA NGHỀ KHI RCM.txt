- tôi ??m b?o 5 b?ng d??i có ?? d? li?u:

career_overview

career_tasks

career_ksas

career_technology

career_outlook

- l?u ý ch? dùng d? li?u c?a 5 b?ng d??i 



- d??i là SQL c?a 5 b?ng:



-- Table: core.career_ksas

-- DROP TABLE IF EXISTS core.career_ksas;

CREATE TABLE IF NOT EXISTS core.career_ksas

(

    id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 9223372036854775807 CACHE 1 ),

    onet_code text COLLATE pg_catalog."default" NOT NULL,

    ksa_type text COLLATE pg_catalog."default" NOT NULL,

    name text COLLATE pg_catalog."default" NOT NULL,

    category text COLLATE pg_catalog."default",

    level numeric(5,2),

    importance numeric(5,2),

    source text COLLATE pg_catalog."default" DEFAULT 'ONET'::text,

    fetched_at timestamp with time zone DEFAULT now(),

    CONSTRAINT career_ksas_pkey PRIMARY KEY (id),

    CONSTRAINT career_ksas_onet_fkey FOREIGN KEY (onet_code)

        REFERENCES core.careers (onet_code) MATCH SIMPLE

        ON UPDATE CASCADE

        ON DELETE CASCADE

        NOT VALID

)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS core.career_ksas

    OWNER to postgres;

-- Index: idx_career_ksas_onet

-- DROP INDEX IF EXISTS core.idx_career_ksas_onet;

CREATE INDEX IF NOT EXISTS idx_career_ksas_onet

    ON core.career_ksas USING btree

    (onet_code COLLATE pg_catalog."default" ASC NULLS LAST)

    TABLESPACE pg_default;

-- Index: idx_career_ksas_onet_source

-- DROP INDEX IF EXISTS core.idx_career_ksas_onet_source;

CREATE INDEX IF NOT EXISTS idx_career_ksas_onet_source

    ON core.career_ksas USING btree

    (onet_code COLLATE pg_catalog."default" ASC NULLS LAST, source COLLATE pg_catalog."default" ASC NULLS LAST)

    TABLESPACE pg_default;

-- Index: idx_core_ksas_onet_type

-- DROP INDEX IF EXISTS core.idx_core_ksas_onet_type;

CREATE INDEX IF NOT EXISTS idx_core_ksas_onet_type

    ON core.career_ksas USING btree

    (onet_code COLLATE pg_catalog."default" ASC NULLS LAST, ksa_type COLLATE pg_catalog."default" ASC NULLS LAST)

    TABLESPACE pg_default;

-- Index: ux_career_ksas_unique

-- DROP INDEX IF EXISTS core.ux_career_ksas_unique;

CREATE UNIQUE INDEX IF NOT EXISTS ux_career_ksas_unique

    ON core.career_ksas USING btree

    (onet_code COLLATE pg_catalog."default" ASC NULLS LAST, ksa_type COLLATE pg_catalog."default" ASC NULLS LAST, name COLLATE pg_catalog."default" ASC NULLS LAST)

    TABLESPACE pg_default;





-- Table: core.career_outlook

-- DROP TABLE IF EXISTS core.career_outlook;

CREATE TABLE IF NOT EXISTS core.career_outlook

(

    onet_code text COLLATE pg_catalog."default" NOT NULL,

    summary_md text COLLATE pg_catalog."default",

    growth_label text COLLATE pg_catalog."default",

    openings_est integer,

    source text COLLATE pg_catalog."default" DEFAULT 'ONET'::text,

    fetched_at timestamp with time zone DEFAULT now(),

    CONSTRAINT career_outlook_pkey PRIMARY KEY (onet_code),
CONSTRAINT career_outlook_onet_fkey FOREIGN KEY (onet_code)

        REFERENCES core.careers (onet_code) MATCH SIMPLE

        ON UPDATE CASCADE

        ON DELETE CASCADE

        NOT VALID

)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS core.career_outlook

    OWNER to postgres;

-- Index: idx_career_outlook_onet

-- DROP INDEX IF EXISTS core.idx_career_outlook_onet;

CREATE INDEX IF NOT EXISTS idx_career_outlook_onet

    ON core.career_outlook USING btree

    (onet_code COLLATE pg_catalog."default" ASC NULLS LAST)

    TABLESPACE pg_default;





-- Table: core.career_overview

-- DROP TABLE IF EXISTS core.career_overview;

CREATE TABLE IF NOT EXISTS core.career_overview

(

    id bigint NOT NULL DEFAULT nextval('core.career_overview_id_seq'::regclass),

    career_id bigint NOT NULL,

    experience_text text COLLATE pg_catalog."default",

    degree_text text COLLATE pg_catalog."default",

    salary_min numeric(12,2),

    salary_max numeric(12,2),

    salary_avg numeric(12,2),

    salary_currency text COLLATE pg_catalog."default" DEFAULT 'VND'::text,

    salary_bands jsonb DEFAULT '[]'::jsonb,

    updated_at timestamp with time zone DEFAULT now(),

    CONSTRAINT career_overview_pkey PRIMARY KEY (id),

    CONSTRAINT ux_career_overview_career UNIQUE (career_id),

    CONSTRAINT career_overview_career_id_fkey FOREIGN KEY (career_id)

        REFERENCES core.careers (id) MATCH SIMPLE

        ON UPDATE NO ACTION

        ON DELETE CASCADE

)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS core.career_overview

    OWNER to postgres;

-- Index: idx_career_overview_career

-- DROP INDEX IF EXISTS core.idx_career_overview_career;

CREATE INDEX IF NOT EXISTS idx_career_overview_career

    ON core.career_overview USING btree

    (career_id ASC NULLS LAST)

    TABLESPACE pg_default;





-- Table: core.career_tasks

-- DROP TABLE IF EXISTS core.career_tasks;

CREATE TABLE IF NOT EXISTS core.career_tasks

(

    id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 9223372036854775807 CACHE 1 ),

    onet_code text COLLATE pg_catalog."default" NOT NULL,

    task_text text COLLATE pg_catalog."default" NOT NULL,

    importance numeric(5,2),

    source text COLLATE pg_catalog."default" DEFAULT 'ONET'::text,

    fetched_at timestamp with time zone DEFAULT now(),

    CONSTRAINT career_tasks_pkey PRIMARY KEY (id),

    CONSTRAINT career_tasks_onet_fkey FOREIGN KEY (onet_code)

        REFERENCES core.careers (onet_code) MATCH SIMPLE

        ON UPDATE CASCADE

        ON DELETE CASCADE

        NOT VALID

)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS core.career_tasks

    OWNER to postgres;

-- Index: idx_career_tasks_onet

-- DROP INDEX IF EXISTS core.idx_career_tasks_onet;

CREATE INDEX IF NOT EXISTS idx_career_tasks_onet

    ON core.career_tasks USING btree

    (onet_code COLLATE pg_catalog."default" ASC NULLS LAST)

    TABLESPACE pg_default;

-- Index: idx_career_tasks_onet_source
-- DROP INDEX IF EXISTS core.idx_career_tasks_onet_source;

CREATE INDEX IF NOT EXISTS idx_career_tasks_onet_source

    ON core.career_tasks USING btree

    (onet_code COLLATE pg_catalog."default" ASC NULLS LAST, source COLLATE pg_catalog."default" ASC NULLS LAST)

    TABLESPACE pg_default;

-- Index: idx_core_tasks_onet

-- DROP INDEX IF EXISTS core.idx_core_tasks_onet;

CREATE INDEX IF NOT EXISTS idx_core_tasks_onet

    ON core.career_tasks USING btree

    (onet_code COLLATE pg_catalog."default" ASC NULLS LAST)

    TABLESPACE pg_default;

-- Index: ux_career_tasks_unique

-- DROP INDEX IF EXISTS core.ux_career_tasks_unique;

CREATE UNIQUE INDEX IF NOT EXISTS ux_career_tasks_unique

    ON core.career_tasks USING btree

    (onet_code COLLATE pg_catalog."default" ASC NULLS LAST, task_text COLLATE pg_catalog."default" ASC NULLS LAST)

    TABLESPACE pg_default;





-- Table: core.career_technology

-- DROP TABLE IF EXISTS core.career_technology;

CREATE TABLE IF NOT EXISTS core.career_technology

(

    id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 9223372036854775807 CACHE 1 ),

    onet_code text COLLATE pg_catalog."default" NOT NULL,

    category text COLLATE pg_catalog."default",

    name text COLLATE pg_catalog."default" NOT NULL,

    hot_flag boolean,

    source text COLLATE pg_catalog."default" DEFAULT 'ONET'::text,

    fetched_at timestamp with time zone DEFAULT now(),

    CONSTRAINT career_technology_pkey PRIMARY KEY (id),

    CONSTRAINT career_technology_onet_fkey FOREIGN KEY (onet_code)

        REFERENCES core.careers (onet_code) MATCH SIMPLE

        ON UPDATE CASCADE

        ON DELETE CASCADE

        NOT VALID

)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS core.career_technology

    OWNER to postgres;

-- Index: idx_career_tech_onet

-- DROP INDEX IF EXISTS core.idx_career_tech_onet;

CREATE INDEX IF NOT EXISTS idx_career_tech_onet

    ON core.career_technology USING btree

    (onet_code COLLATE pg_catalog."default" ASC NULLS LAST)

    TABLESPACE pg_default;

-- Index: idx_career_technology_onet

-- DROP INDEX IF EXISTS core.idx_career_technology_onet;

CREATE INDEX IF NOT EXISTS idx_career_technology_onet

    ON core.career_technology USING btree

    (onet_code COLLATE pg_catalog."default" ASC NULLS LAST)

    TABLESPACE pg_default;

-- Index: idx_career_technology_onet_source

-- DROP INDEX IF EXISTS core.idx_career_technology_onet_source;

CREATE INDEX IF NOT EXISTS idx_career_technology_onet_source

    ON core.career_technology USING btree

    (onet_code COLLATE pg_catalog."default" ASC NULLS LAST, source COLLATE pg_catalog."default" ASC NULLS LAST)

    TABLESPACE pg_default;

-- Index: idx_core_tech_onet

-- DROP INDEX IF EXISTS core.idx_core_tech_onet;

CREATE INDEX IF NOT EXISTS idx_core_tech_onet

    ON core.career_technology USING btree

    (onet_code COLLATE pg_catalog."default" ASC NULLS LAST)

    TABLESPACE pg_default;
-- Index: ux_career_technology_unique

-- DROP INDEX IF EXISTS core.ux_career_technology_unique;

CREATE UNIQUE INDEX IF NOT EXISTS ux_career_technology_unique

    ON core.career_technology USING btree

    (onet_code COLLATE pg_catalog."default" ASC NULLS LAST, category COLLATE pg_catalog."default" ASC NULLS LAST, name COLLATE pg_catalog."default" ASC NULLS LAST)

    TABLESPACE pg_default;
